services:
  vsite.app.manager:
    class: Drupal\vsite\Plugin\AppManager
    parent: default_plugin_manager
  hierarchical.storage:
    class: Drupal\vsite\Config\HierarchicalStorage
    public: false
    decorates: config.storage
    decoration_priority: 4
    arguments: ['@hierarchical.storage.inner']
  vsite.storage:
    class: Drupal\vsite\Config\VsiteStorageDefinition
    arguments: ['@hierarchical.storage']
    tags:
      - { name: event_subscriber }